{"version":3,"file":"mgt-tasks.js","sourceRoot":"src/","sources":["components/mgt-tasks/mgt-tasks.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * -------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation.  All Rights Reserved.  Licensed under the MIT License.\n * See License in the project root for license information.\n * -------------------------------------------------------------------------------------------\n */\n\nimport {\n  ComponentMediaQuery,\n  MgtTemplatedComponent,\n  ProviderState,\n  Providers,\n  customElement,\n  mgtHtml\n} from '@microsoft/mgt-element';\nimport { Person, PlannerAssignments, PlannerTask, User } from '@microsoft/microsoft-graph-types';\nimport { Contact, OutlookTask, OutlookTaskFolder } from '@microsoft/microsoft-graph-types-beta';\nimport { HTMLTemplateResult, PropertyValueMap, TemplateResult, html } from 'lit';\nimport { property, state } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { getMe } from '../../graph/graph.user';\nimport { getShortDateString } from '../../utils/Utils';\nimport { MgtPeoplePicker } from '../mgt-people-picker/mgt-people-picker';\nimport { MgtPeople } from '../mgt-people/mgt-people';\nimport '../mgt-person/mgt-person';\nimport '../sub-components/mgt-arrow-options/mgt-arrow-options';\nimport '../sub-components/mgt-dot-options/mgt-dot-options';\nimport { MgtFlyout } from '../sub-components/mgt-flyout/mgt-flyout';\nimport { PersonCardInteraction } from './../PersonCardInteraction';\nimport { styles } from './mgt-tasks-css';\nimport { strings } from './strings';\nimport { ITask, ITaskFolder, ITaskGroup, ITaskSource, PlannerTaskSource, TodoTaskSource } from './task-sources';\nimport { getSvg, SvgIcon } from '../../utils/SvgHelper';\nimport { isElementDark } from '../../utils/isDark';\nimport { registerFluentComponents } from '../../utils/FluentComponents';\nimport {\n  fluentSelect,\n  fluentOption,\n  fluentTextField,\n  fluentButton,\n  fluentCheckbox,\n  fluentSkeleton\n} from '@fluentui/web-components';\n\nregisterFluentComponents(fluentSelect, fluentOption, fluentTextField, fluentButton, fluentCheckbox, fluentSkeleton);\n\n/**\n * Defines how a person card is shown when a user interacts with\n * a person component\n *\n * @export\n * @enum {number}\n */\nexport enum TasksSource {\n  /**\n   * Use Microsoft Planner\n   */\n  planner,\n\n  /**\n   * Use Microsoft To-Do\n   */\n  todo\n}\n\n/**\n * String resources for Mgt Tasks\n *\n * @export\n * @interface TasksStringResource\n */\nexport interface TasksStringResource {\n  /**\n   * Self Assigned string\n   *\n   * @type {string}\n   * @memberof TasksStringResource\n   */\n  BASE_SELF_ASSIGNED: string;\n  /**\n   * Self Assigned Buckets string\n   *\n   * @type {string}\n   * @memberof TasksStringResource\n   */\n  BUCKETS_SELF_ASSIGNED: string;\n  /**\n   * Buckets not found string\n   *\n   * @type {string}\n   * @memberof TasksStringResource\n   */\n  BUCKET_NOT_FOUND: string;\n  /**\n   * Self Assigned Plans string\n   *\n   * @type {string}\n   * @memberof TasksStringResource\n   */\n  PLANS_SELF_ASSIGNED: string;\n  /**\n   * Plan not found string\n   *\n   * @type {string}\n   * @memberof TasksStringResource\n   */\n  PLAN_NOT_FOUND: string;\n}\n\n/*\n * Filter function\n */\nexport type TaskFilter = (task: PlannerTask | OutlookTask) => boolean;\n\n// Strings and Resources for different task contexts\nconst TASK_RES = {\n  todo: {\n    BASE_SELF_ASSIGNED: 'All Tasks',\n    BUCKETS_SELF_ASSIGNED: 'All Tasks',\n    BUCKET_NOT_FOUND: 'Folder not found',\n    PLANS_SELF_ASSIGNED: 'All groups',\n    PLAN_NOT_FOUND: 'Group not found'\n  },\n  planner: {\n    BASE_SELF_ASSIGNED: 'Assigned to Me',\n    BUCKETS_SELF_ASSIGNED: 'All Tasks',\n    BUCKET_NOT_FOUND: 'Bucket not found',\n    PLANS_SELF_ASSIGNED: 'All Plans',\n    PLAN_NOT_FOUND: 'Plan not found'\n  }\n};\n\nconst plannerAssignment = {\n  '@odata.type': '#microsoft.graph.plannerAssignment',\n  orderHint: ' !'\n};\n\n/**\n * Web component enables the user to view, add, remove, complete, or edit tasks. It works with tasks in Microsoft Planner or Microsoft To-Do.\n *\n * @export\n * @class MgtTasks\n * @extends {MgtBaseComponent}\n *\n * @fires {CustomEvent<ITask>} taskAdded - Fires when a new task has been created.\n * @fires {CustomEvent<ITask>} taskChanged - Fires when task metadata has been changed, such as marking completed.\n * @fires {CustomEvent<ITask>} taskClick - Fires when the user clicks or taps on a task.\n * @fires {CustomEvent<ITask>} taskRemoved - Fires when an existing task has been deleted.\n *\n * @cssprop --tasks-header-padding - {String} Tasks header padding. Default is 0 0 14px 0.\n * @cssprop --tasks-header-margin - {String} Tasks header margin. Default is none.\n * @cssprop --tasks-header-text-font-size: {Length} the font size of the tasks header. Default is 24px.\n * @cssprop --tasks-header-text-font-weight: {Length} the font weight of the tasks header. Default is 600.\n * @cssprop --tasks-header-text-color: {Color} the font color of the tasks header.\n * @cssprop --tasks-header-text-hover-color: {Color} the font color of the tasks header when you hover on it.\n *\n * @cssprop --tasks-new-button-width - {Length} Tasks new button width. Default is none.\n * @cssprop --tasks-new-button-height - {Length} Tasks new button height. Default is none\n * @cssprop --tasks-new-button-text-color - {Color} Tasks new button text color.\n * @cssprop --tasks-new-button-text-font-weight - {Length} Tasks new button text font weight. Default is 700.\n * @cssprop --tasks-new-button-background - {Length} Tasks new button background.\n * @cssprop --tasks-new-button-border - {Length} Tasks new button border. Default is none.\n * @cssprop --tasks-new-button-background-hover - {Color} Tasks new button hover background.\n * @cssprop --tasks-new-button-background-active - {Color} Tasks new button active background.\n *\n * @cssprop --task-add-new-button-width - {Length} Add a new task button width. Default is none.\n * @cssprop --task-add-new-button-height - {Length} Add a new task button height. Default is none\n * @cssprop --task-add-new-button-text-color - {Color} Add a new task button text color.\n * @cssprop --task-add-new-button-text-font-weight - {Length} Add a new task button text font weight. Default is 700.\n * @cssprop --task-add-new-button-background - {Length} Add a new task button background.\n * @cssprop --task-add-new-button-border - {Length} Add a new task button border. Default is none.\n * @cssprop --task-add-new-button-background-hover - {Color} Add a new task button hover background.\n * @cssprop --task-add-new-button-background-active - {Color} Add a new task button active background.\n *\n * @cssprop --task-cancel-new-button-width - {Length} Cancel adding a new task button width. Default is none.\n * @cssprop --task-cancel-new-button-height - {Length} Cancel adding a new task button height. Default is none\n * @cssprop --task-cancel-new-button-text-color - {Color} Cancel adding a new task button text color.\n * @cssprop --task-cancel-new-button-text-font-weight - {Length} Cancel adding a new task button text font weight. Default is 700.\n * @cssprop --task-cancel-new-button-background - {Length} Cancel adding a new task button background.\n * @cssprop --task-cancel-new-button-border - {Length} Cancel adding a new task button border. Default is none.\n * @cssprop --task-cancel-new-button-background-hover - {Color} Cancel adding a new task button hover background.\n * @cssprop --task-cancel-new-button-background-active - {Color} Cancel adding a new task button active background.\n *\n * @cssprop --task-new-input-border - {Length} the border of the input for a new task. Default is fluent UI input border.\n * @cssprop --task-new-input-border-radius - {Length} the border radius of the input for a new task. Default is fluent UI input border.\n * @cssprop --task-new-input-background-color - {Color} the background color of the new task input.\n * @cssprop --task-new-input-hover-background-color - {Color} the background color of the new task input when you hover.\n * @cssprop --task-new-input-placeholder-color - {Color} the placeholder colder of the new task input.\n * @cssprop --task-new-dropdown-border - {Length} the border of the dropdown for a new task. Default is fluent UI dropdown border.\n * @cssprop --task-new-dropdown-border-radius - {Length} the border radius of the dropdown for a new task. Default is fluent UI dropdown border.\n * @cssprop --task-new-dropdown-background-color - {Color} the background color of the new task dropdown.\n * @cssprop --task-new-dropdown-hover-background-color - {Color} the background color of the new task dropdown when you hover.\n * @cssprop --task-new-dropdown-placeholder-color - {Color} the placeholder colder of the new task dropdown.\n * @cssprop --task-new-dropdown-list-background-color - {Color} the background color of the dropdown list options.\n * @cssprop --task-new-dropdown-option-text-color - {Color} the text color of the dropdown option text.\n * @cssprop --task-new-dropdown-option-hover-background-color - {Color} the background color of the dropdown option when you hover.\n * @cssprop --task-new-person-icon-color - {Color} color of the assign person text.\n * @cssprop --task-new-person-icon-text-color - {Color} color of the text beside the assign person icon.\n *\n * @cssprop --task-complete-checkbox-background-color - {Color} A completed task checkbox background color.\n * @cssprop --task-complete-checkbox-text-color - {Color} A completed task checkbox check color.\n * @cssprop --task-incomplete-checkbox-background-color - {Color} A incompleted task checkbox background color.\n * @cssprop --task-incomplete-checkbox-background-hover-color - {Color} A incompleted task checkbox background color.\n *\n * @cssprop --task-title-text-font-size - {Length} Task title text font size. Default is medium.\n * @cssprop --task-title-text-font-weight - {Length} Task title text font weight. Default is 600.\n * @cssprop --task-complete-title-text-color - {Length} Task title color for a complete task.\n * @cssprop --task-incomplete-title-text-color - {Length} Task title color for an incomplete task.\n *\n * @cssprop --task-icons-width - {Length} The icons in a task width size. Default is 20px;\n * @cssprop --task-icons-height - {Length} The icons in a task height size. Default is 20px;\n * @cssprop --task-icons-background-color - {Color} The icons in a task color background color.\n * @cssprop --task-icons-text-font-color - {Color} The text beside icons in a task color background color.\n * @cssprop --task-icons-text-font-size - {Length} The font size of the text beside icons in a task. Default is 12px.\n * @cssprop --task-icons-text-font-weight - {Length} The font weight of the text beside icons in a task. Default is 600.\n *\n * @cssprop --task-complete-background-color - {Color} The background color of a task that is complete.\n * @cssprop --task-incomplete-background-color - {Color} The background color of a task that is incomplete.\n * @cssprop --task-complete-border - {Length} The border of a task that is complete.  Default is 2px dotted var(--neutral-fill-strong-rest).\n * @cssprop --task-incomplete-border - {Length} The border of a task that is incomplete. Default is 1px solid var(--neutral-fill-strong-rest).\n * @cssprop --task-complete-border-radius - {Length} The border radius of a task that is incomplete. Default is 4px.\n * @cssprop --task-incomplete-border-radius - {Length} The border radius of a task that is incomplete. Default is 4px.\n * @cssprop --task-complete-padding - {Length} The padding of a task that is complete. Default is 10px.\n * @cssprop --task-incomplete-padding - {Length} The padding of a task that is incomplete. Default is 10px.\n * @cssprop --tasks-gap - {Length} The size of the gap between two tasks in a row. Default is 20px.\n *\n * @cssprop --tasks-background-color - {Color} the color of the background where the tasks are rendered.\n * @cssprop --tasks-border - {Length} the border of the area the tasks are rendered. Default is none.\n * @cssprop --tasks-border-radius - {Length} the border radius of the area where the tasks are rendered. Default is none.\n * @cssprop --tasks-padding - {Length} the padding of the are where the tasks are rendered. Default is 12px.\n */\n\n@customElement('tasks')\nexport class MgtTasks extends MgtTemplatedComponent {\n  /**\n   * determines whether todo, or planner functionality for task component\n   *\n   * @readonly\n   * @type {TasksStringResource}\n   * @memberof MgtTasks\n   */\n  public get res() {\n    switch (this.dataSource) {\n      case TasksSource.todo:\n        return TASK_RES.todo;\n      case TasksSource.planner:\n      default:\n        return TASK_RES.planner;\n    }\n  }\n\n  /**\n   * Array of styles to apply to the element. The styles should be defined\n   * using the `css` tag function.\n   */\n\n  public static get styles() {\n    return styles;\n  }\n\n  /**\n   * Strings for localization\n   *\n   * @readonly\n   * @protected\n   * @memberof MgtTasks\n   */\n  protected get strings() {\n    return strings;\n  }\n\n  /**\n   * Get whether new task view is visible\n   *\n   * @memberof MgtTasks\n   */\n  public get isNewTaskVisible(): boolean {\n    return this._isNewTaskVisible;\n  }\n\n  /**\n   * Set whether new task is visible\n   *\n   * @memberof MgtTasks\n   */\n  public set isNewTaskVisible(value: boolean) {\n    this._isNewTaskVisible = value;\n    if (!value) {\n      this._newTaskDueDate = null;\n      this._newTaskName = '';\n      this._newTaskGroupId = '';\n      this._newTaskContainerId = '';\n    }\n  }\n\n  /**\n   * determines if tasks are un-editable\n   *\n   * @type {boolean}\n   */\n  @property({ attribute: 'read-only', type: Boolean })\n  public readOnly: boolean;\n\n  /**\n   * determines which task source is loaded, either planner or todo\n   *\n   * @type {TasksSource}\n   */\n  @property({\n    attribute: 'data-source',\n    converter: (value, _type) => {\n      value = value.toLowerCase();\n      return (TasksSource[value] as TasksSource) || TasksSource.planner;\n    }\n  })\n  public dataSource: TasksSource = TasksSource.planner;\n\n  /**\n   * if set, the component will only show tasks from either this plan or group\n   *\n   * @type {string}\n   */\n  @property({ attribute: 'target-id', type: String })\n  public targetId: string;\n\n  /**\n   * if set, the component will only show tasks from this bucket or folder\n   *\n   * @type {string}\n   */\n  @property({ attribute: 'target-bucket-id', type: String })\n  public targetBucketId: string;\n\n  /**\n   * if set, the component will first show tasks from this plan or group\n   *\n   * @type {string}\n   * @memberof MgtTasks\n   */\n  @property({ attribute: 'initial-id', type: String })\n  public initialId: string;\n\n  /**\n   * if set, the component will first show tasks from this bucket or folder\n   *\n   * @type {string}\n   * @memberof MgtTasks\n   */\n  @property({ attribute: 'initial-bucket-id', type: String })\n  public initialBucketId: string;\n\n  /**\n   * sets whether the header is rendered\n   *\n   * @type {boolean}\n   * @memberof MgtTasks\n   */\n  @property({ attribute: 'hide-header', type: Boolean })\n  public hideHeader: boolean;\n\n  /**\n   * sets whether the options are rendered\n   *\n   * @type {boolean}\n   * @memberof MgtTasks\n   */\n  @property({ attribute: 'hide-options', type: Boolean })\n  public hideOptions: boolean;\n\n  /**\n   * allows developer to define specific group id\n   *\n   * @type {string}\n   */\n  @property({ attribute: 'group-id', type: String })\n  public groupId: string;\n\n  /**\n   * Optional filter function when rendering tasks\n   *\n   * @type {TaskFilter}\n   * @memberof MgtTasks\n   */\n  public taskFilter: TaskFilter;\n\n  /**\n   * Get the scopes required for tasks\n   *\n   * @static\n   * @return {*}  {string[]}\n   * @memberof MgtTasks\n   */\n  public static get requiredScopes(): string[] {\n    return [\n      ...new Set([\n        'group.read.all',\n        'group.readwrite.all',\n        'tasks.read',\n        'tasks.readwrite',\n        ...MgtPeople.requiredScopes,\n        ...MgtPeoplePicker.requiredScopes\n      ])\n    ];\n  }\n\n  @property() private _isNewTaskVisible: boolean;\n  @property() private _newTaskBeingAdded: boolean;\n  @property() private _newTaskName: string;\n  @property() private _newTaskDueDate: Date;\n  @property() private _newTaskGroupId: string;\n  @property() private _newTaskFolderId: string;\n  @property() private _newTaskContainerId: string;\n  @property() private _groups: ITaskGroup[];\n  @property() private _folders: ITaskFolder[];\n  @property() private _tasks: ITask[];\n  @property() private _hiddenTasks: string[];\n  @property() private _loadingTasks: string[];\n  @property() private _inTaskLoad: boolean;\n  @property() private _hasDoneInitialLoad: boolean;\n  @property() private _todoDefaultSet: boolean;\n\n  @property() private _currentGroup: string;\n  @property() private _currentFolder: string;\n  @state() private _isDarkMode = false;\n  @state() private _me: User = null;\n  private previousMediaQuery: ComponentMediaQuery;\n\n  constructor() {\n    super();\n    this.clearState();\n\n    this.previousMediaQuery = this.mediaQuery;\n  }\n\n  /**\n   * updates provider state\n   *\n   * @memberof MgtTasks\n   */\n  public connectedCallback() {\n    super.connectedCallback();\n    window.addEventListener('resize', this.onResize);\n    window.addEventListener('darkmodechanged', this.onThemeChanged);\n    // invoked to ensure we have the correct initial value for _isDarkMode\n    this.onThemeChanged();\n  }\n\n  /**\n   * removes updates on provider state\n   *\n   * @memberof MgtTasks\n   */\n  public disconnectedCallback() {\n    window.removeEventListener('resize', this.onResize);\n    window.removeEventListener('darkmodechanged', this.onThemeChanged);\n    super.disconnectedCallback();\n  }\n\n  /**\n   * Synchronizes property values when attributes change.\n   *\n   * @param {string} name\n   * @param {string} oldVal\n   * @param {string} newVal\n   * @memberof MgtTasks\n   */\n  public attributeChangedCallback(name: string, oldVal: string, newVal: string) {\n    super.attributeChangedCallback(name, oldVal, newVal);\n    if (name === 'data-source') {\n      if (this.dataSource === TasksSource.planner) {\n        this._currentGroup = this.initialId;\n        this._currentFolder = this.initialBucketId;\n      } else if (this.dataSource === TasksSource.todo) {\n        this._currentGroup = null;\n        this._currentFolder = this.initialId;\n      }\n\n      this.clearState();\n      void this.requestStateUpdate();\n    }\n  }\n\n  /**\n   * clears state of component\n   */\n  protected clearState(): void {\n    this._newTaskFolderId = '';\n    this._newTaskGroupId = '';\n    this._newTaskDueDate = null;\n    this._newTaskName = '';\n    this._newTaskBeingAdded = false;\n\n    this._tasks = [];\n    this._folders = [];\n    this._groups = [];\n    this._hiddenTasks = [];\n    this._loadingTasks = [];\n\n    this._hasDoneInitialLoad = false;\n    this._inTaskLoad = false;\n    this._todoDefaultSet = false;\n  }\n\n  /**\n   * Invoked when the element is first updated. Implement to perform one time\n   * work on the element after update.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * @param _changedProperties Map of changed properties with old values\n   */\n  protected firstUpdated(changedProperties: PropertyValueMap<unknown>) {\n    super.firstUpdated(changedProperties);\n\n    if (this.initialId && !this._currentGroup) {\n      if (this.dataSource === TasksSource.planner) {\n        this._currentGroup = this.initialId;\n      } else if (this.dataSource === TasksSource.todo) {\n        this._currentFolder = this.initialId;\n      }\n    }\n\n    if (this.dataSource === TasksSource.planner && this.initialBucketId && !this._currentFolder) {\n      this._currentFolder = this.initialBucketId;\n    }\n  }\n\n  /**\n   * Invoked on each update to perform rendering tasks. This method must return\n   * a lit-html TemplateResult. Setting properties inside this method will *not*\n   * trigger the element to update.\n   */\n  protected render() {\n    const loadingTask = this._inTaskLoad && !this._hasDoneInitialLoad ? this.renderLoadingTask() : null;\n\n    let header: TemplateResult;\n\n    if (!this.hideHeader) {\n      header = html`\n        <div class=\"header\">\n          ${this.renderPlanOptions()}\n        </div>\n      `;\n    }\n\n    return html`\n      ${header}\n      <div class=\"tasks\">\n        ${this._isNewTaskVisible ? this.renderNewTask() : null} ${loadingTask}\n        ${repeat(\n          this._tasks,\n          task => task.id,\n          task => this.renderTask(task)\n        )}\n      </div>\n    `;\n  }\n\n  /**\n   * loads tasks from dataSource\n   *\n   * @returns\n   * @memberof MgtTasks\n   */\n  protected async loadState() {\n    const ts = this.getTaskSource();\n    if (!ts) {\n      return;\n    }\n\n    const provider = Providers.globalProvider;\n    if (!provider || provider.state !== ProviderState.SignedIn) {\n      return;\n    }\n\n    this._inTaskLoad = true;\n    if (!this._me) {\n      const graph = provider.graph.forComponent(this);\n      this._me = await getMe(graph);\n    }\n\n    if (this.groupId && this.dataSource === TasksSource.planner) {\n      await this._loadTasksForGroup(ts);\n    } else if (this.targetId) {\n      if (this.dataSource === TasksSource.todo) {\n        await this._loadTargetTodoTasks(ts);\n      } else {\n        await this._loadTargetPlannerTasks(ts);\n      }\n    } else {\n      await this._loadAllTasks(ts);\n    }\n\n    this._tasks = this._tasks\n      .filter(task => this.isTaskInSelectedGroupFilter(task))\n      .filter(task => this.isTaskInSelectedFolderFilter(task))\n      .filter(task => !this._hiddenTasks.includes(task.id));\n\n    if (this.taskFilter) {\n      this._tasks = this._tasks.filter(task => this.taskFilter(task._raw));\n    }\n\n    this._inTaskLoad = false;\n    this._hasDoneInitialLoad = true;\n  }\n\n  private readonly onResize = () => {\n    if (this.mediaQuery !== this.previousMediaQuery) {\n      this.previousMediaQuery = this.mediaQuery;\n      this.requestUpdate();\n    }\n  };\n\n  private readonly onThemeChanged = () => {\n    this._isDarkMode = isElementDark(this);\n  };\n\n  private async _loadTargetTodoTasks(ts: ITaskSource) {\n    const groups = await ts.getTaskGroups();\n    const folders = (await Promise.all(groups.map(group => ts.getTaskFoldersForTaskGroup(group.id)))).reduce(\n      (cur, ret) => [...cur, ...ret],\n      []\n    );\n    const tasks = (\n      await Promise.all(folders.map(folder => ts.getTasksForTaskFolder(folder.id, folder.parentId)))\n    ).reduce((cur, ret) => [...cur, ...ret], []);\n\n    this._tasks = tasks;\n    this._folders = folders;\n    this._groups = groups;\n\n    this._currentGroup = null;\n  }\n\n  private async _loadTargetPlannerTasks(ts: ITaskSource) {\n    const group = await ts.getTaskGroup(this.targetId);\n    let folders = await ts.getTaskFoldersForTaskGroup(group.id);\n\n    if (this.targetBucketId) {\n      folders = folders.filter(folder => folder.id === this.targetBucketId);\n    }\n\n    const tasks = (\n      await Promise.all(folders.map(folder => ts.getTasksForTaskFolder(folder.id, folder.parentId)))\n    ).reduce((cur, ret) => [...cur, ...ret], []);\n\n    this._tasks = tasks;\n    this._folders = folders;\n    this._groups = [group];\n  }\n\n  private async _loadAllTasks(ts: ITaskSource) {\n    const groups = await ts.getTaskGroups();\n    const folders = (await Promise.all(groups.map(group => ts.getTaskFoldersForTaskGroup(group.id)))).reduce(\n      (cur, ret) => [...cur, ...ret],\n      []\n    );\n\n    if (!this.initialId && this.dataSource === TasksSource.todo && !this._todoDefaultSet) {\n      this._todoDefaultSet = true;\n      const defaultFolder = folders.find(d => (d._raw as OutlookTaskFolder).isDefaultFolder);\n      if (defaultFolder) {\n        this._currentFolder = defaultFolder.id;\n      }\n    }\n\n    const tasks = (\n      await Promise.all(folders.map(folder => ts.getTasksForTaskFolder(folder.id, folder.parentId)))\n    ).reduce((cur, ret) => [...cur, ...ret], []);\n\n    this._tasks = tasks;\n    this._folders = folders;\n    this._groups = groups;\n  }\n\n  private async _loadTasksForGroup(ts: ITaskSource) {\n    const groups = await ts.getTaskGroupsForGroup(this.groupId);\n    const folders = (await Promise.all(groups.map(group => ts.getTaskFoldersForTaskGroup(group.id)))).reduce(\n      (cur, ret) => [...cur, ...ret],\n      []\n    );\n\n    const tasks = (\n      await Promise.all(folders.map(folder => ts.getTasksForTaskFolder(folder.id, folder.parentId)))\n    ).reduce((cur, ret) => [...cur, ...ret], []);\n\n    this._tasks = tasks;\n    this._folders = folders;\n    this._groups = groups;\n  }\n\n  private async addTask(\n    name: string,\n    dueDate: Date,\n    topParentId: string,\n    immediateParentId: string,\n    assignments: PlannerAssignments = {}\n  ) {\n    const ts = this.getTaskSource();\n    if (!ts) {\n      return;\n    }\n\n    const newTask = {\n      assignments,\n      dueDate,\n      immediateParentId,\n      name,\n      topParentId\n    } as ITask;\n\n    this._newTaskBeingAdded = true;\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    newTask._raw = await ts.addTask(newTask);\n    this.fireCustomEvent('taskAdded', newTask);\n\n    await this.requestStateUpdate();\n    this._newTaskBeingAdded = false;\n    this.isNewTaskVisible = false;\n  }\n\n  private async completeTask(task: ITask) {\n    const ts = this.getTaskSource();\n    if (!ts) {\n      return;\n    }\n    this._loadingTasks = [...this._loadingTasks, task.id];\n    await ts.setTaskComplete(task);\n    this.fireCustomEvent('taskChanged', task);\n\n    await this.requestStateUpdate();\n    this._loadingTasks = this._loadingTasks.filter(id => id !== task.id);\n  }\n\n  private async uncompleteTask(task: ITask) {\n    const ts = this.getTaskSource();\n    if (!ts) {\n      return;\n    }\n\n    this._loadingTasks = [...this._loadingTasks, task.id];\n    await ts.setTaskIncomplete(task);\n    this.fireCustomEvent('taskChanged', task);\n\n    await this.requestStateUpdate();\n    this._loadingTasks = this._loadingTasks.filter(id => id !== task.id);\n  }\n\n  private async removeTask(task: ITask) {\n    const ts = this.getTaskSource();\n    if (!ts) {\n      return;\n    }\n\n    this._hiddenTasks = [...this._hiddenTasks, task.id];\n    await ts.removeTask(task);\n    this.fireCustomEvent('taskRemoved', task);\n\n    await this.requestStateUpdate();\n    this._hiddenTasks = this._hiddenTasks.filter(id => id !== task.id);\n  }\n\n  private async assignPeople(task: ITask, people: (User | Person | Contact)[] = []) {\n    const ts = this.getTaskSource();\n    if (!ts) {\n      return;\n    }\n\n    // create previously selected people Object\n    let currentTaskAssigneesIds: string[] = [];\n    if (task) {\n      if (task.assignments) {\n        currentTaskAssigneesIds = Object.keys(task.assignments).sort();\n      }\n    }\n\n    const newTaskAssigneesIds: string[] = people.map(person => {\n      return person.id;\n    });\n\n    // new people from people picker\n    const isEqual =\n      newTaskAssigneesIds.length === currentTaskAssigneesIds.length &&\n      newTaskAssigneesIds.sort().every((value, index) => {\n        return value === currentTaskAssigneesIds[index];\n      });\n\n    if (isEqual) {\n      return;\n    }\n\n    const peopleObj: Record<string, PlannerAssignments> = {};\n\n    // Removes an assignee to a task by setting the value to null\n    for (const p of currentTaskAssigneesIds) {\n      if (newTaskAssigneesIds.includes(p)) {\n        peopleObj[p] = plannerAssignment;\n      } else {\n        peopleObj[p] = null;\n      }\n    }\n\n    // Adds a person to the task by assigning them a temporary planner value\n    newTaskAssigneesIds.forEach(assigneeId => {\n      if (!currentTaskAssigneesIds.includes(assigneeId)) {\n        peopleObj[assigneeId] = plannerAssignment;\n      }\n    });\n\n    if (task) {\n      await ts.assignPeopleToTask(task, peopleObj);\n      await this.requestStateUpdate();\n      this._loadingTasks = this._loadingTasks.filter(id => id !== task.id);\n    }\n  }\n\n  private readonly onAddTaskClick = () => {\n    const picker = this.getPeoplePicker(null);\n\n    const peopleObj: Record<string, unknown> = {};\n\n    if (picker) {\n      for (const person of picker?.selectedPeople ?? []) {\n        peopleObj[person.id] = plannerAssignment;\n      }\n    }\n\n    if (!this._newTaskBeingAdded && this._newTaskName && (this._currentGroup || this._newTaskGroupId)) {\n      void this.addTask(\n        this._newTaskName,\n        this._newTaskDueDate,\n        !this._currentGroup ? this._newTaskGroupId : this._currentGroup,\n        !this._currentFolder ? this._newTaskFolderId : this._currentFolder,\n        peopleObj\n      );\n    }\n  };\n\n  private readonly onAddTaskKeyDown = (e: KeyboardEvent) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      this.onAddTaskClick();\n    }\n  };\n\n  private readonly newTaskButtonKeydown = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      this.isNewTaskVisible = !this.isNewTaskVisible;\n    }\n  };\n\n  private readonly addNewTaskButtonClick = () => {\n    this.isNewTaskVisible = !this.isNewTaskVisible;\n  };\n\n  private readonly handleNewTaskDateChange = (e: Event) => {\n    const value = (e.target as HTMLInputElement).value;\n    if (value) {\n      this._newTaskDueDate = new Date(value + 'T17:00');\n    } else {\n      this._newTaskDueDate = null;\n    }\n  };\n\n  private readonly handleSelectedPlan = (e: Event) => {\n    this._newTaskGroupId = (e.target as HTMLInputElement).value;\n    if (this.dataSource === TasksSource.planner) {\n      const task = this._groups.filter(iTask => iTask.id === this._newTaskGroupId);\n      this._newTaskContainerId = task.pop()?.containerId ?? this._newTaskContainerId;\n    }\n  };\n\n  private readonly newTaskVisible = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      this.isNewTaskVisible = false;\n    }\n  };\n\n  private renderPlanOptions(): TemplateResult {\n    const p = Providers.globalProvider;\n\n    if (!p || p.state !== ProviderState.SignedIn) {\n      return null;\n    }\n\n    if (this._inTaskLoad && !this._hasDoneInitialLoad) {\n      return html`<span class=\"loading-header\"></span>`;\n    }\n\n    const addButton =\n      this.readOnly || this._isNewTaskVisible\n        ? null\n        : html`\n          <fluent-button\n            appearance=\"accent\"\n            class=\"new-task-button\"\n            @keydown=${this.newTaskButtonKeydown}\n            @click=${() => (this.isNewTaskVisible = !this.isNewTaskVisible)}>\n              <span slot=\"start\">${getSvg(SvgIcon.Add, 'currentColor')}</span>\n              ${this.strings.addTaskButtonSubtitle}\n          </fluent-button>\n        `;\n\n    if (this.dataSource === TasksSource.planner) {\n      const currentGroup = this._groups.find(d => d.id === this._currentGroup) || {\n        title: this.res.BASE_SELF_ASSIGNED\n      };\n      const groupOptions = {\n        [this.res.BASE_SELF_ASSIGNED]: () => {\n          this._currentGroup = null;\n          this._currentFolder = null;\n        }\n      };\n      for (const group of this._groups) {\n        groupOptions[group.title] = () => {\n          this._currentGroup = group.id;\n          this._currentFolder = null;\n        };\n      }\n      const groupSelect: TemplateResult = mgtHtml`\n        <mgt-arrow-options\n          class=\"arrow-options\"\n          .options=\"${groupOptions}\"\n          .value=\"${currentGroup.title}\"></mgt-arrow-options>`;\n\n      const separator = !this._currentGroup ? null : getSvg(SvgIcon.ChevronRight);\n\n      const currentFolder = this._folders.find(d => d.id === this._currentFolder) || {\n        name: this.res.BUCKETS_SELF_ASSIGNED\n      };\n      const folderOptions = {\n        [this.res.BUCKETS_SELF_ASSIGNED]: () => {\n          this._currentFolder = null;\n        }\n      };\n\n      for (const folder of this._folders.filter(d => d.parentId === this._currentGroup)) {\n        folderOptions[folder.name] = () => {\n          this._currentFolder = folder.id;\n        };\n      }\n\n      const folderSelect = this.targetBucketId\n        ? html`\n            <span class=\"plan-title\">\n              ${this._folders[0]?.name || ''}\n            </span>`\n        : mgtHtml`\n            <mgt-arrow-options class=\"arrow-options\" .options=\"${folderOptions}\" .value=\"${currentFolder.name}\"></mgt-arrow-options>\n          `;\n\n      return html`\n        <div class=\"Title\">\n          ${groupSelect} ${separator} ${!this._currentGroup ? null : folderSelect}\n        </div>\n        ${addButton}\n      `;\n    } else {\n      const folder = this._folders.find(d => d.id === this.targetId) || { name: this.res.BUCKETS_SELF_ASSIGNED };\n      const currentFolder = this._folders.find(d => d.id === this._currentFolder) || {\n        name: this.res.BUCKETS_SELF_ASSIGNED\n      };\n\n      const folderOptions = {};\n\n      for (const d of this._folders) {\n        folderOptions[d.name] = () => {\n          this._currentFolder = d.id;\n        };\n      }\n\n      folderOptions[this.res.BUCKETS_SELF_ASSIGNED] = () => {\n        this._currentFolder = null;\n      };\n\n      const folderSelect = this.targetId\n        ? html`\n            <span class=\"plan-title\">\n              ${folder.name}\n            </span>\n          `\n        : mgtHtml`\n            <mgt-arrow-options class=\"arrow-options\" .value=\"${currentFolder.name}\" .options=\"${folderOptions}\"></mgt-arrow-options>\n          `;\n\n      return html`\n        <span class=\"title\">\n          ${folderSelect}\n        </span>\n        ${addButton}\n      `;\n    }\n  }\n\n  private readonly handleDateChange = (e: UIEvent) => {\n    const value = (e.target as HTMLInputElement).value;\n    if (value) {\n      this._newTaskDueDate = new Date(value + 'T17:00');\n    } else {\n      this._newTaskDueDate = null;\n    }\n  };\n\n  private renderNewTask() {\n    const iconColor = 'var(--neutral-foreground-hint)';\n\n    const taskTitle = html`\n      <fluent-text-field\n        autocomplete=\"off\"\n        placeholder=${this.strings.newTaskPlaceholder}\n        .value=\"${this._newTaskName}\"\n        class=\"new-task\"\n        aria-label=${this.strings.newTaskPlaceholder}\n        @input=${(e: KeyboardEvent) => (this._newTaskName = (e.target as HTMLInputElement).value)}>\n      </fluent-text-field>`;\n\n    if (this._groups.length > 0 && !this._newTaskGroupId) {\n      this._newTaskGroupId = this._groups[0].id;\n    }\n\n    const groupOptions = html`\n      ${repeat(\n        this._groups,\n        grp => grp.id,\n        grp => html`<fluent-option value=\"${grp.id}\">${grp.title}</fluent-option>`\n      )}`;\n\n    const group =\n      this.dataSource === TasksSource.todo\n        ? null\n        : this._currentGroup\n        ? html`\n          <span class=\"new-task-group\">\n            ${this.renderPlannerIcon(iconColor)}\n            <span>${this.getPlanTitle(this._currentGroup)}</span>\n          </span>`\n        : html`\n            <fluent-select>\n              <span slot=\"start\">${this.renderPlannerIcon(iconColor)}</span>\n              ${this._groups.length > 0 ? groupOptions : html`<fluent-option selected>No groups found</fluent-option>`}\n            </fluent-select>`;\n\n    const folders = this._folders.filter(\n      folder =>\n        (this._currentGroup && folder.parentId === this._currentGroup) ||\n        (!this._currentGroup && folder.parentId === this._newTaskGroupId)\n    );\n    if (folders.length > 0 && !this._newTaskFolderId) {\n      this._newTaskFolderId = folders[0].id;\n    }\n\n    const folderOptions = html`\n      ${repeat(\n        folders,\n        folder => folder.id,\n        folder => html`<fluent-option value=\"${folder.id}\">${folder.name}</fluent-option>`\n      )}`;\n\n    const taskFolder = this._currentFolder\n      ? html`\n          <span class=\"new-task-bucket\">\n            ${this.renderBucketIcon(iconColor)}\n            <span>${this.getFolderName(this._currentFolder)}</span>\n          </span>\n        `\n      : html`\n         <fluent-select>\n          <span slot=\"start\">${this.renderBucketIcon(iconColor)}</span>\n          ${folders.length > 0 ? folderOptions : html`<fluent-option selected>No folders found</fluent-option>`}\n        </fluent-select>`;\n\n    const dateField = { dark: this._isDarkMode, 'new-task': true };\n\n    const taskDue = html`\n      <fluent-text-field\n        autocomplete=\"off\"\n        type=\"date\"\n        class=${classMap(dateField)}\n        aria-label=\"${this.strings.addTaskDate}\"\n        .value=\"${this.dateToInputValue(this._newTaskDueDate)}\"\n        @change=${this.handleDateChange}>\n      </fluent-text-field>`;\n\n    const taskPeople = this.dataSource === TasksSource.todo ? null : this.renderAssignedPeople(null);\n\n    const newTaskActionButtons = this._newTaskBeingAdded\n      ? html`<div class=\"task-add-button-container\"></div>`\n      : html`\n          <fluent-button\n            class=\"add-task\"\n            @click=${this.onAddTaskClick}\n            @keydown=${this.onAddTaskKeyDown}\n            appearance=\"neutral\">\n              ${this.strings.addTaskButtonSubtitle}\n          </fluent-button>\n          <fluent-button\n            class=\"cancel-task\"\n            @click=${() => (this.isNewTaskVisible = false)}\n            @keydown=${this.newTaskVisible}\n            appearance=\"neutral\">\n              ${this.strings.cancelNewTaskSubtitle}\n          </fluent-button>`;\n\n    return html`\n    <div\n      class=${classMap({\n        task: true,\n        'new-task': true\n      })}>\n      <div class=\"task-details-container\">\n        <div class=\"top add-new-task\">\n          <div class=\"check-and-title\">\n            ${taskTitle}\n            <div class=\"task-content\">\n              <div class=\"task-group\">${group}</div>\n              <div class=\"task-bucket\">${taskFolder}</div>\n              ${taskPeople}\n              <div class=\"task-due\">${taskDue}</div>\n            </div>\n          </div>\n          <div class=\"task-options new-task-action-buttons\">${newTaskActionButtons}</div>\n        </div>\n      </div>\n    </div>\n  `;\n  }\n\n  private togglePeoplePicker(task: ITask) {\n    const picker = this.getPeoplePicker(task);\n    const mgtPeople = this.getMgtPeople(task);\n    const flyout = this.getFlyout(task);\n\n    if (picker && mgtPeople && flyout) {\n      if (flyout.isOpen) {\n        flyout.close();\n      } else {\n        picker.selectedPeople = mgtPeople.people;\n        flyout.open();\n        setTimeout(() => picker.focus(), 100);\n      }\n    }\n  }\n\n  private updateAssignedPeople(task: ITask) {\n    const picker = this.getPeoplePicker(task);\n    const mgtPeople = this.getMgtPeople(task);\n\n    if (picker && picker.selectedPeople !== mgtPeople.people) {\n      mgtPeople.people = picker.selectedPeople;\n      void this.assignPeople(task, picker.selectedPeople);\n    }\n  }\n\n  private getPeoplePicker(task: ITask): MgtPeoplePicker {\n    const taskId = task ? task.id : 'new-task';\n    return this.renderRoot.querySelector<MgtPeoplePicker>(`.picker-${taskId}`);\n  }\n\n  private getMgtPeople(task: ITask): MgtPeople {\n    const taskId = task ? task.id : 'new-task';\n    return this.renderRoot.querySelector<MgtPeople>(`.people-${taskId}`);\n  }\n\n  private getFlyout(task: ITask): MgtFlyout {\n    const taskId = task ? task.id : 'new-task';\n    return this.renderRoot.querySelector(`.flyout-${taskId}`);\n  }\n\n  private renderTask(task: ITask) {\n    const { name = 'Task', completed = false, dueDate } = task;\n\n    const groupTitle = this._currentGroup ? null : this.getPlanTitle(task.topParentId);\n    const folderTitle = this._currentFolder ? null : this.getFolderName(task.immediateParentId);\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    const context = { task: { ...task._raw, groupTitle, folderTitle } };\n    const taskTemplate = this.renderTemplate('task', context, task.id);\n    if (taskTemplate) {\n      return taskTemplate;\n    }\n\n    let taskDetails = this.renderTemplate('task-details', context, `task-details-${task.id}`);\n\n    if (!taskDetails) {\n      const iconColor = 'var(--neutral-foreground-hint)';\n      const group =\n        this.dataSource === TasksSource.todo || this._currentGroup\n          ? null\n          : html`\n              <div class=\"task-group\">\n                <span class=\"task-icon\">${this.renderPlannerIcon(iconColor)}</span>\n                <span class=\"task-icon-text\">${this.getPlanTitle(task.topParentId)}</span>\n              </div>\n            `;\n\n      const folder = this._currentFolder\n        ? null\n        : html`\n            <div class=\"task-bucket\">\n              <span class=\"task-icon\">${this.renderBucketIcon(iconColor)}</span>\n              <span class=\"task-icon-text\">${this.getFolderName(task.immediateParentId)}</span>\n            </div>\n          `;\n\n      const taskDue = !dueDate\n        ? null\n        : html`\n            <div class=\"task-due\">\n              <span class=\"task-icon-text\">${this.strings.due}${getShortDateString(dueDate)}</span>\n            </div>\n          `;\n\n      const taskPeople = this.dataSource === TasksSource.todo ? null : this.renderAssignedPeople(task);\n\n      taskDetails = html`${group} ${folder} ${taskPeople} ${taskDue}`;\n    }\n\n    const taskOptions =\n      this.readOnly || this.hideOptions\n        ? null\n        : mgtHtml`\n            <mgt-dot-options\n              class=\"dot-options\"\n              .options=\"${{\n                [this.strings.removeTaskSubtitle]: () => this.removeTask(task)\n              }}\"\n            ></mgt-dot-options>`;\n\n    const taskClasses = classMap({\n      task: true,\n      complete: completed,\n      incomplete: !completed,\n      'read-only': this.readOnly\n    });\n\n    return html`\n      <div\n        data-id=\"task-${task.id}\"\n        class=${taskClasses}\n        @click=${() => this.handleTaskClick(task)}>\n        <div class=\"task-details-container\">\n          <div class=\"top\">\n            <div class=\"check-and-title\">\n              <fluent-checkbox\n                @click=${(e: MouseEvent) => this.checkTask(e, task)}\n                @keydown=${(e: KeyboardEvent) => this.handleTaskCheckKeyDown(e, task)}\n                ?checked=${completed}>\n                  ${name}\n              </fluent-checkbox>\n            </div>\n            <div class=\"task-options\">${taskOptions}</div>\n          </div>\n          <div class=\"bottom\">${taskDetails}</div>\n        </div>\n      </div>\n    `;\n  }\n\n  private async handleTaskCheckKeyDown(e: KeyboardEvent, task: ITask) {\n    if (e.key === 'Enter') {\n      if (!this.readOnly) {\n        if (!task.completed) {\n          await this.completeTask(task);\n        } else {\n          await this.uncompleteTask(task);\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n  }\n\n  private async checkTask(e: MouseEvent, task: ITask) {\n    if (!this.readOnly) {\n      const target = this.shadowRoot.querySelector(`[data-id='task-${task.id}'`);\n      if (target) target.classList.add('updating');\n      if (!task.completed) {\n        await this.completeTask(task);\n      } else {\n        await this.uncompleteTask(task);\n      }\n      if (target) target.classList.remove('updating');\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  private readonly renderPlannerIcon = (iconColor: string) => {\n    return getSvg(SvgIcon.Planner, iconColor);\n  };\n  private readonly renderBucketIcon = (iconColor: string) => {\n    return getSvg(SvgIcon.Milestone, iconColor);\n  };\n\n  private readonly handlePeopleClick = (e: MouseEvent, task: ITask) => {\n    this.togglePeoplePicker(task);\n    e.stopPropagation();\n  };\n\n  private readonly handlePeopleKeydown = (e: KeyboardEvent, task: ITask) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      this.togglePeoplePicker(task);\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  private readonly handlePeoplePickerKeydown = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.stopPropagation();\n    }\n  };\n\n  private renderAssignedPeople(task: ITask): TemplateResult {\n    let assignedGroupId: string;\n    const taskAssigneeClasses = {\n      'new-task-assignee': task === null,\n      'task-assignee': task !== null,\n      'task-detail': task !== null\n    };\n\n    const taskId = task ? task.id : 'new-task';\n    taskAssigneeClasses[`flyout-${taskId}`] = true;\n\n    const assignedPeople = task ? Object.keys(task.assignments).map(key => key) : [];\n\n    if (!this.newTaskVisible) {\n      const raw: PlannerTask = task?._raw as PlannerTask;\n      const planId = raw?.planId;\n      if (planId) {\n        const group = this._groups.filter(grp => grp.id === planId);\n        assignedGroupId = group.pop()?.containerId;\n      }\n    }\n\n    const planGroupId = this.isNewTaskVisible ? this._newTaskContainerId : assignedGroupId;\n\n    const assignedPeopleTemplate: HTMLTemplateResult = mgtHtml`\n      <mgt-people\n        class=\"people people-${taskId}\"\n        .userIds=${assignedPeople}\n        .personCardInteraction=${PersonCardInteraction.none}\n        @click=${(e: MouseEvent) => this.handlePeopleClick(e, task)}\n        @keydown=${(e: KeyboardEvent) => this.handlePeopleKeydown(e, task)}\n      >\n        <template data-type=\"no-data\">\n          <fluent-button>\n            <span style=\"display:flex;place-content:start;gap:4px;padding-inline-start:4px\">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" class=\"svg\" fill=\"currentColor\">\n                <path d=\"M9 2a4 4 0 100 8 4 4 0 000-8zM6 6a3 3 0 116 0 3 3 0 01-6 0z\"></path>\n                <path d=\"M4 11a2 2 0 00-2 2c0 1.7.83 2.97 2.13 3.8A9.14 9.14 0 009 18c.41 0 .82-.02 1.21-.06A5.5 5.5 0 019.6 17 12 12 0 019 17a8.16 8.16 0 01-4.33-1.05A3.36 3.36 0 013 13a1 1 0 011-1h5.6c.18-.36.4-.7.66-1H4z\"></path>\n                <path d=\"M14.5 19a4.5 4.5 0 100-9 4.5 4.5 0 000 9zm0-7c.28 0 .5.22.5.5V14h1.5a.5.5 0 010 1H15v1.5a.5.5 0 01-1 0V15h-1.5a.5.5 0 010-1H14v-1.5c0-.28.22-.5.5-.5z\"></path>\n              </svg> Assign</span>\n            </fluent-button>\n        </template>\n      </mgt-people>`;\n\n    const picker = mgtHtml`\n      <mgt-people-picker\n        class=\"people-picker picker-${taskId}\"\n        .groupId=${ifDefined(planGroupId)}\n        @keydown=${this.handlePeoplePickerKeydown}>\n      ></mgt-people-picker>`;\n\n    return mgtHtml`\n      <mgt-flyout\n        light-dismiss\n        class=${classMap(taskAssigneeClasses)}\n        @closed=${() => this.updateAssignedPeople(task)}\n      >\n        <div slot=\"anchor\">${assignedPeopleTemplate}</div>\n        <div slot=\"flyout\" part=\"picker\" class=\"picker\">${picker}</div>\n      </mgt-flyout>\n    `;\n  }\n\n  private handleTaskClick(task: ITask) {\n    if (task) {\n      this.fireCustomEvent('taskClick', task);\n    }\n  }\n\n  private renderLoadingTask() {\n    return html`\n      <div class=\"header\">\n        <div class=\"title\">\n          <fluent-skeleton shimmer class=\"shimmer\" shape=\"rect\"></fluent-skeleton>\n        </div>\n        <div class=\"new-task-button\">\n          <fluent-skeleton shimmer class=\"shimmer\" shape=\"rect\"></fluent-skeleton>\n        </div>\n      </div>\n      <div class=\"tasks\">\n        <div class=\"task incomplete\">\n          <div class=\"task-details-container\">\n            <div class=\"top\">\n              <div class=\"check-and-title shimmer\">\n                <fluent-skeleton shimmer class=\"checkbox\" shape=\"circle\"></fluent-skeleton>\n                <fluent-skeleton shimmer class=\"title\" shape=\"rect\"></fluent-skeleton>\n              </div>\n              <div class=\"task-options\">\n                <fluent-skeleton shimmer class=\"options\" shape=\"rect\"></fluent-skeleton>\n              </div>\n            </div>\n            <div class=\"bottom\">\n              <div class=\"task-group\">\n                <div class=\"task-icon\">\n                  <fluent-skeleton shimmer class=\"shimmer icon\" shape=\"rect\"></fluent-skeleton>\n                </div>\n                <div class=\"task-icon-text\">\n                  <fluent-skeleton shimmer class=\"shimmer text\" shape=\"rect\"></fluent-skeleton>\n                </div>\n              </div>\n              <div class=\"task-bucket\">\n                <div class=\"task-icon\">\n                  <fluent-skeleton shimmer class=\"shimmer icon\" shape=\"rect\"></fluent-skeleton>\n                </div>\n                <div class=\"task-icon-text\">\n                  <fluent-skeleton shimmer class=\"shimmer text\" shape=\"rect\"></fluent-skeleton>\n                </div>\n              </div>\n              <div class=\"task-details shimmer\">\n                <fluent-skeleton shimmer class=\"shimmer icon\" shape=\"circle\"></fluent-skeleton>\n                <fluent-skeleton shimmer class=\"shimmer icon\" shape=\"circle\"></fluent-skeleton>\n                <fluent-skeleton shimmer class=\"shimmer icon\" shape=\"circle\"></fluent-skeleton>\n              </div>\n              <div class=\"task-due\">\n                <div class=\"task-icon-text\">\n                  <fluent-skeleton shimmer class=\"shimmer text\" shape=\"rect\"></fluent-skeleton>\n                </div>\n              </div>\n              </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private getTaskSource(): ITaskSource {\n    const p = Providers.globalProvider;\n    if (!p || p.state !== ProviderState.SignedIn) {\n      return null;\n    }\n\n    const graph = p.graph.forComponent(this);\n    if (this.dataSource === TasksSource.planner) {\n      return new PlannerTaskSource(graph);\n    } else if (this.dataSource === TasksSource.todo) {\n      return new TodoTaskSource(graph);\n    } else {\n      return null;\n    }\n  }\n\n  private getPlanTitle(planId: string): string {\n    if (!planId) {\n      return this.res.BASE_SELF_ASSIGNED;\n    } else if (planId === this.res.PLANS_SELF_ASSIGNED) {\n      return this.res.PLANS_SELF_ASSIGNED;\n    } else {\n      return (\n        this._groups.find(plan => plan.id === planId) || {\n          title: this.res.PLAN_NOT_FOUND\n        }\n      ).title;\n    }\n  }\n\n  private getFolderName(bucketId: string): string {\n    if (!bucketId) {\n      return this.res.BUCKETS_SELF_ASSIGNED;\n    }\n    return (\n      this._folders.find(buck => buck.id === bucketId) || {\n        name: this.res.BUCKET_NOT_FOUND\n      }\n    ).name;\n  }\n\n  private isTaskInSelectedGroupFilter(task: ITask) {\n    return (\n      !this._currentGroup ||\n      task.topParentId === this._currentGroup ||\n      (!this._currentGroup && this.getTaskSource().isAssignedToMe(task, this._me?.id))\n    );\n  }\n\n  private isTaskInSelectedFolderFilter(task: ITask) {\n    return task.immediateParentId === this._currentFolder || !this._currentFolder;\n  }\n\n  private dateToInputValue(date: Date) {\n    if (date) {\n      return new Date(date.getTime() - date.getTimezoneOffset() * 60000).toISOString().split('T')[0];\n    }\n\n    return null;\n  }\n}\n\nexport { ITask };\n"]}