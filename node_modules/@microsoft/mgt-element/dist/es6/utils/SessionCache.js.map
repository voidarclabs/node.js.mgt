{"version":3,"file":"SessionCache.js","sourceRoot":"src/","sources":["utils/SessionCache.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;AAEH;;;GAGG;AACH,MAAM,OAAO,YAAY;IAGvB;QACE,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,cAAc,CAAC;IACvC,CAAC;IAED;;;;;OAKG;IACH,OAAO,CAAC,GAAW,EAAE,KAAa;QAChC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IACnC,CAAC;IAED;;;;;;OAMG;IACH,OAAO,CAAC,GAAW;QACjB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACnC,CAAC;IAED;;;;OAIG;IACH,KAAK;QACH,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;IACvB,CAAC;CACF;AAED;;;;;;GAMG;AACH,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAAC,WAAmB,EAAW,EAAE;IAC/D,IAAI,OAAgB,CAAC;IACrB,IAAI;QACF,IAAI,WAAW,KAAK,gBAAgB,EAAE;YACpC,OAAO,GAAG,MAAM,CAAC,cAAc,CAAC;SACjC;aAAM;YACL,OAAO,GAAG,MAAM,CAAC,YAAY,CAAC;SAC/B;QACD,MAAM,CAAC,GAAG,kBAAkB,CAAC;QAC7B,OAAO,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACtB,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACtB,OAAO,IAAI,CAAC;KACb;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,CACL,CAAC,YAAY,YAAY;YACzB,4BAA4B;YAC5B,CAAC,CAAC,CAAC,IAAI,KAAK,EAAE;gBACZ,UAAU;gBACV,CAAC,CAAC,IAAI,KAAK,IAAI;gBACf,yDAAyD;gBACzD,4BAA4B;gBAC5B,CAAC,CAAC,IAAI,KAAK,oBAAoB;gBAC/B,UAAU;gBACV,CAAC,CAAC,IAAI,KAAK,4BAA4B,CAAC;YAC1C,0EAA0E;YAC1E,OAAO;YACP,OAAO,CAAC,MAAM,KAAK,CAAC,CACrB,CAAC;KACH;AACH,CAAC,CAAC","sourcesContent":["/**\n * -------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation.  All Rights Reserved.  Licensed under the MIT License.\n * See License in the project root for license information.\n * -------------------------------------------------------------------------------------------\n */\n\n/**\n * Wrapper around the window.sessionStorage API. Use\n * this to set, get and clear session items.\n */\nexport class SessionCache {\n  private readonly session: Storage;\n\n  constructor() {\n    this.session = window.sessionStorage;\n  }\n\n  /**\n   * Stores a value in session storage.\n   *\n   * @param key\n   * @param value\n   */\n  setItem(key: string, value: string) {\n    this.session.setItem(key, value);\n  }\n\n  /**\n   * Gets the value for a given key from session storage.\n   *\n   * @param {string} key\n   * @return {*}  {string}\n   * @memberof SessionCache\n   */\n  getItem(key: string): string {\n    return this.session.getItem(key);\n  }\n\n  /**\n   * Clears session storage.\n   *\n   * @memberof SessionCache\n   */\n  clear() {\n    this.session.clear();\n  }\n}\n\n/**\n * Checks if a sessionStorage or a localStorage is available\n * for use in a browser.\n *\n * @param storageType can be 'sessionStorage' or 'localStorage'.\n * @returns true if the storage is available for use.\n */\nexport const storageAvailable = (storageType: string): boolean => {\n  let storage: Storage;\n  try {\n    if (storageType === 'sessionStorage') {\n      storage = window.sessionStorage;\n    } else {\n      storage = window.localStorage;\n    }\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return (\n      e instanceof DOMException &&\n      // everything except Firefox\n      (e.code === 22 ||\n        // Firefox\n        e.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        e.name === 'QuotaExceededError' ||\n        // Firefox\n        e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage &&\n      storage.length !== 0\n    );\n  }\n};\n"]}